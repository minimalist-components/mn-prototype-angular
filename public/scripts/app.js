"use strict";function NotFoundConfig($urlRouterProvider,$stateProvider){function goTo404($injector){var $state=$injector.get("$state"),message="Could not find a state associated with url "+window.location.pathname;$state.go("404",{message:message})}$urlRouterProvider.otherwise(goTo404),$stateProvider.state("404",{views:{main:{templateUrl:"templates/404.template.html"}}})}function appConfig($locationProvider,$stateProvider){$locationProvider.html5Mode(!0),$stateProvider.state("app",{"abstract":!0,views:{main:{templateUrl:"templates/app.template.html"}}})}function ApiConfig(RestangularProvider){RestangularProvider.setBaseUrl("http://localhost:4000"),RestangularProvider.setRestangularFields({id:"_id"})}function ApiRun(Restangular,$state){function redirectToParentState(data,operation){return"put"!==operation&&"post"!==operation||$state.go("^",{},{reload:!0}),data}Restangular.addResponseInterceptor(redirectToParentState)}function HomeConfig($stateProvider){$stateProvider.state("app.home",{url:"/",redirectTo:"app.users"})}function AuthenticationConfig($authProvider){$authProvider.loginUrl="//localhost:4000/users/authenticate",$authProvider.authHeader="Authorization",$authProvider.tokenType="",$authProvider.authToken="",$authProvider.storageType="localStorage"}function Authentication($auth){this.login=function(user){return $auth.login(user)},this.logout=function(){return $auth.logout()},this.status=function(){return $auth.isAuthenticated()},this.user=function(){return $auth.getPayload()}}function loadingConfig(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1,cfpLoadingBarProvider.includeBar=!0}function LoginConfig($stateProvider){$stateProvider.state("login",{url:"/login",views:{main:{templateUrl:"templates/login.template.html",controller:"LoginController",controllerAs:"login"}}}).state("logout",{url:"/logout",redirectTo:"login"})}function LoginController(Authentication,$state){function authenticate(){function redirectToHome(){$state.go("app.home")}Authentication.login(this.credentials).then(redirectToHome)}var email=void 0,password=void 0;this.credentials={email:email,password:password},this.authenticate=authenticate}function LoginRun($rootScope,$state,Authentication){function logoutInLoginState(event,toState){"login"===toState.name&&Authentication.logout()}function requireAuthentication(event,toState){var stateRequireLogin=toState.name.startsWith("app."),isAuthenticated=Authentication.status();stateRequireLogin&&!isAuthenticated&&(event.preventDefault(),$state.go("login"))}$rootScope.$on("$stateChangeStart",logoutInLoginState),$rootScope.$on("$stateChangeStart",requireAuthentication)}function PromisesConfig($qProvider){$qProvider.errorOnUnhandledRejections(!1)}function UsersConfig($stateProvider){$stateProvider.state("app.users",{url:"/users",views:{"content@app":{templateUrl:"templates/users-list.template.html",controller:"UsersController",controllerAs:"users",resolve:{list:function(Users){return Users.list()},data:function(){return null}}}}}).state("app.users.create",{url:"/create",views:{"content@app":{templateUrl:"templates/users-form.template.html",controller:"UsersController",controllerAs:"users",resolve:{list:function(){return null},data:function(Users){return Users.create()}}}}}).state("app.users.edit",{url:"/:id",views:{"content@app":{templateUrl:"templates/users-form.template.html",controller:"UsersController",controllerAs:"users",resolve:{list:function(){return null},data:function(Users,$stateParams){return Users.get($stateParams.id)}}}}})}function UsersController(list,data){this.list=list,this.data=data,this.options=["Stark","Lannister","Targaryen","Snow"]}function UsersService(Restangular){function list(){return resource.getList()}function get(id){return resource.one(id).get()}function create(){return resource.one()}var resource=Restangular.service("users");this.list=list,this.get=get,this.create=create}angular.module("prototype",["ui.router","ui.router.redirect","satellizer","mn-form","mn-input","mn-password","mn-select","restangular","angular-loading-bar","ngAnimate"]),NotFoundConfig.$inject=["$urlRouterProvider","$stateProvider"],angular.module("prototype").config(NotFoundConfig),appConfig.$inject=["$locationProvider","$stateProvider"],angular.module("prototype").config(appConfig),ApiConfig.$inject=["RestangularProvider"],angular.module("prototype").config(ApiConfig),ApiRun.$inject=["Restangular","$state"],angular.module("prototype").run(ApiRun),HomeConfig.$inject=["$stateProvider"],angular.module("prototype").config(HomeConfig),AuthenticationConfig.$inject=["$authProvider"],angular.module("prototype").config(AuthenticationConfig),Authentication.$inject=["$auth"],angular.module("prototype").service("Authentication",Authentication),loadingConfig.$inject=["cfpLoadingBarProvider"],angular.module("prototype").config(loadingConfig),LoginConfig.$inject=["$stateProvider"],angular.module("prototype").config(LoginConfig),LoginController.$inject=["Authentication","$state"],angular.module("prototype").controller("LoginController",LoginController),LoginRun.$inject=["$rootScope","$state","Authentication"],angular.module("prototype").run(LoginRun),PromisesConfig.$inject=["$qProvider"],angular.module("prototype").config(PromisesConfig),UsersConfig.$inject=["$stateProvider"],angular.module("prototype").config(UsersConfig),UsersController.$inject=["list","data"],angular.module("prototype").controller("UsersController",UsersController),UsersService.$inject=["Restangular"],angular.module("prototype").service("Users",UsersService);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIjQwNC80MDQuY29uZmlnLmpzIiwiYXBwL2FwcC5jb25maWcuanMiLCJhcGkvYXBpLmNvbmZpZy5qcyIsImFwaS9hcGkucnVuLmpzIiwiaG9tZS9ob21lLmNvbmZpZy5qcyIsImF1dGhlbnRpY2F0aW9uL2F1dGhlbnRpY2F0aW9uLmNvbmZpZy5qcyIsImF1dGhlbnRpY2F0aW9uL2F1dGhlbnRpY2F0aW9uLnNlcnZpY2UuanMiLCJsb2FkaW5nLWJhci9sb2FkaW5nLWJhci5jb25maWcuanMiLCJsb2dpbi9sb2dpbi5jb25maWcuanMiLCJsb2dpbi9sb2dpbi5jb250cm9sbGVyLmpzIiwibG9naW4vbG9naW4ucnVuLmpzIiwicHJvbWlzZXMvcHJvbWlzZXMuY29uZmlnLmpzIiwidXNlcnMvdXNlcnMuY29uZmlnLmpzIiwidXNlcnMvdXNlcnMuY29udHJvbGxlci5qcyIsInVzZXJzL3VzZXJzLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiTm90Rm91bmRDb25maWciLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsImdvVG80MDQiLCIkaW5qZWN0b3IiLCIkc3RhdGUiLCJnZXQiLCJtZXNzYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImdvIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ2aWV3cyIsIm1haW4iLCJ0ZW1wbGF0ZVVybCIsImFwcENvbmZpZyIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiYWJzdHJhY3QiLCJBcGlDb25maWciLCJSZXN0YW5ndWxhclByb3ZpZGVyIiwic2V0QmFzZVVybCIsInNldFJlc3Rhbmd1bGFyRmllbGRzIiwiaWQiLCJBcGlSdW4iLCJSZXN0YW5ndWxhciIsInJlZGlyZWN0VG9QYXJlbnRTdGF0ZSIsImRhdGEiLCJvcGVyYXRpb24iLCJyZWxvYWQiLCJhZGRSZXNwb25zZUludGVyY2VwdG9yIiwiSG9tZUNvbmZpZyIsInVybCIsInJlZGlyZWN0VG8iLCJBdXRoZW50aWNhdGlvbkNvbmZpZyIsIiRhdXRoUHJvdmlkZXIiLCJsb2dpblVybCIsImF1dGhIZWFkZXIiLCJ0b2tlblR5cGUiLCJhdXRoVG9rZW4iLCJzdG9yYWdlVHlwZSIsIkF1dGhlbnRpY2F0aW9uIiwiJGF1dGgiLCJ0aGlzIiwibG9naW4iLCJ1c2VyIiwibG9nb3V0Iiwic3RhdHVzIiwiaXNBdXRoZW50aWNhdGVkIiwiZ2V0UGF5bG9hZCIsImxvYWRpbmdDb25maWciLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJpbmNsdWRlU3Bpbm5lciIsImluY2x1ZGVCYXIiLCJMb2dpbkNvbmZpZyIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJMb2dpbkNvbnRyb2xsZXIiLCJhdXRoZW50aWNhdGUiLCJyZWRpcmVjdFRvSG9tZSIsImNyZWRlbnRpYWxzIiwidGhlbiIsImVtYWlsIiwicGFzc3dvcmQiLCJMb2dpblJ1biIsIiRyb290U2NvcGUiLCJsb2dvdXRJbkxvZ2luU3RhdGUiLCJldmVudCIsInRvU3RhdGUiLCJuYW1lIiwicmVxdWlyZUF1dGhlbnRpY2F0aW9uIiwic3RhdGVSZXF1aXJlTG9naW4iLCJzdGFydHNXaXRoIiwicHJldmVudERlZmF1bHQiLCIkb24iLCJQcm9taXNlc0NvbmZpZyIsIiRxUHJvdmlkZXIiLCJlcnJvck9uVW5oYW5kbGVkUmVqZWN0aW9ucyIsIlVzZXJzQ29uZmlnIiwiY29udGVudEBhcHAiLCJyZXNvbHZlIiwibGlzdCIsIlVzZXJzIiwiY3JlYXRlIiwiJHN0YXRlUGFyYW1zIiwiVXNlcnNDb250cm9sbGVyIiwib3B0aW9ucyIsIlVzZXJzU2VydmljZSIsInJlc291cmNlIiwiZ2V0TGlzdCIsIm9uZSIsInNlcnZpY2UiLCJhbmd1bGFyIiwibW9kdWxlIiwiJGluamVjdCIsImNvbmZpZyIsInJ1biJdLCJtYXBwaW5ncyI6IkFBQUEsWUNJQSxTQUFTQSxnQkFBZUMsbUJBQW9CQyxnQkFjMUMsUUFBU0MsU0FBUUMsV0FDZixHQUFNQyxRQUFTRCxVQUFVRSxJQUFJLFVBQ3ZCQyxR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Q0dDLE9BQU8sYUFDUEYsUUFBUSxpQkFBa0JsRCxnQkNEN0JTLGNBQWM0QyxTQUFXLHlCQUR6QkYsUUFDR0MsT0FBTyxhQUNQRSxPQUFPN0MsZUNEVkksWUFBWXdDLFNBQVcsa0JBRHZCRixRQUNHQyxPQUFPLGFBQ1BFLE9BQU96QyxhQ0RWRyxnQkFBZ0JxQyxTQUFXLGlCQUFrQixVQUQ3Q0YsUUFDR0MsT0FBTyxhQUNQdEMsV0FBVyxrQkFBbUJFLGlCQ0RqQ08sU0FBUzhCLFNBQVcsYUFBYyxTQUFVLGtCQUQ1Q0YsUUFDR0MsT0FBTyxhQUNQRyxJQUFJaEMsVUNEUFcsZUFBZW1CLFNBQVcsY0FEMUJGLFFBQ0dDLE9BQU8sYUFDUEUsT0FBT3BCLGdCQ0RWRyxZQUFZZ0IsU0FBVyxrQkFEdkJGLFFBQ0dDLE9BQU8sYUFDUEUsT0FBT2pCLGFDRFZPLGdCQUFnQlMsU0FBVyxPQUFRLFFBRG5DRixRQUNHQyxPQUFPLGFBQ1B0QyxXQUFXLGtCQUFtQjhCLGlCQ0RqQ0UsYUFBYU8sU0FBVyxlQUR4QkYsUUFDR0MsT0FBTyxhQUNQRixRQUFRLFFBQVNKIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdwcm90b3R5cGUnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAndWkucm91dGVyLnJlZGlyZWN0JyxcbiAgJ3NhdGVsbGl6ZXInLFxuICAnbW4tZm9ybScsXG4gICdtbi1pbnB1dCcsXG4gICdtbi1wYXNzd29yZCcsXG4gICdtbi1zZWxlY3QnLFxuICAncmVzdGFuZ3VsYXInLFxuICAnYW5ndWxhci1sb2FkaW5nLWJhcicsXG4gICduZ0FuaW1hdGUnLFxuXSlcbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbmZpZyhOb3RGb3VuZENvbmZpZylcblxuZnVuY3Rpb24gTm90Rm91bmRDb25maWcoJHVybFJvdXRlclByb3ZpZGVyLCAkc3RhdGVQcm92aWRlcikge1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKGdvVG80MDQpXG5cbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJzQwNCcsIHtcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluJzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzLzQwNC50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICAvLyBjb250cm9sbGVyOiAnVXNlcnNDb250cm9sbGVyJyxcbiAgICAgICAgICAvLyBjb250cm9sbGVyQXM6ICd1c2VycycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pXG5cbiAgZnVuY3Rpb24gZ29UbzQwNCgkaW5qZWN0b3IpIHtcbiAgICBjb25zdCAkc3RhdGUgPSAkaW5qZWN0b3IuZ2V0KCckc3RhdGUnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgQ291bGQgbm90IGZpbmQgYSBzdGF0ZSBhc3NvY2lhdGVkIHdpdGggdXJsICR7d2luZG93LmxvY2F0aW9uLnBhdGhuYW1lfWBcbiAgICAkc3RhdGUuZ28oJzQwNCcsIHttZXNzYWdlfSlcbiAgfVxufVxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAuY29uZmlnKGFwcENvbmZpZylcblxuZnVuY3Rpb24gYXBwQ29uZmlnKCRsb2NhdGlvblByb3ZpZGVyLCAkc3RhdGVQcm92aWRlcikge1xuICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSlcblxuICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnYXBwJywge1xuICAgIGFic3RyYWN0OiB0cnVlLFxuICAgIHZpZXdzOiB7XG4gICAgICBtYWluOiB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2FwcC50ZW1wbGF0ZS5odG1sJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbmZpZyhBcGlDb25maWcpXG5cbmZ1bmN0aW9uIEFwaUNvbmZpZyhSZXN0YW5ndWxhclByb3ZpZGVyKSB7XG4gIFJlc3Rhbmd1bGFyUHJvdmlkZXIuc2V0QmFzZVVybCgnaHR0cDovL2xvY2FsaG9zdDo0MDAwJylcbiAgUmVzdGFuZ3VsYXJQcm92aWRlci5zZXRSZXN0YW5ndWxhckZpZWxkcyh7aWQ6ICdfaWQnfSlcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLnJ1bihBcGlSdW4pXG5cbmZ1bmN0aW9uIEFwaVJ1bihSZXN0YW5ndWxhciwgJHN0YXRlKSB7XG4gIFJlc3Rhbmd1bGFyLmFkZFJlc3BvbnNlSW50ZXJjZXB0b3IocmVkaXJlY3RUb1BhcmVudFN0YXRlKVxuXG4gIGZ1bmN0aW9uIHJlZGlyZWN0VG9QYXJlbnRTdGF0ZShkYXRhLCBvcGVyYXRpb24pIHtcbiAgICBpZiAob3BlcmF0aW9uID09PSAncHV0JyB8fCBvcGVyYXRpb24gPT09ICdwb3N0Jykge1xuICAgICAgJHN0YXRlLmdvKCdeJywge30sIHtyZWxvYWQ6IHRydWV9KVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoSG9tZUNvbmZpZylcblxuZnVuY3Rpb24gSG9tZUNvbmZpZygkc3RhdGVQcm92aWRlcikge1xuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnYXBwLmhvbWUnLCB7XG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHJlZGlyZWN0VG86ICdhcHAudXNlcnMnLFxuICAgIH0pXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoQXV0aGVudGljYXRpb25Db25maWcpXG5cbmZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uQ29uZmlnKCRhdXRoUHJvdmlkZXIpIHtcbiAgJGF1dGhQcm92aWRlci5sb2dpblVybCA9ICcvL2xvY2FsaG9zdDo0MDAwL3VzZXJzL2F1dGhlbnRpY2F0ZSdcbiAgJGF1dGhQcm92aWRlci5hdXRoSGVhZGVyID0gJ0F1dGhvcml6YXRpb24nXG4gICRhdXRoUHJvdmlkZXIudG9rZW5UeXBlID0gJydcbiAgJGF1dGhQcm92aWRlci5hdXRoVG9rZW4gPSAnJ1xuICAkYXV0aFByb3ZpZGVyLnN0b3JhZ2VUeXBlID0gJ2xvY2FsU3RvcmFnZSdcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLnNlcnZpY2UoJ0F1dGhlbnRpY2F0aW9uJywgQXV0aGVudGljYXRpb24pXG5cbmZ1bmN0aW9uIEF1dGhlbnRpY2F0aW9uKCRhdXRoKSB7XG4gIHRoaXMubG9naW4gPSB1c2VyID0+ICRhdXRoLmxvZ2luKHVzZXIpXG4gIHRoaXMubG9nb3V0ID0gKCkgPT4gJGF1dGgubG9nb3V0KClcbiAgdGhpcy5zdGF0dXMgPSAoKSA9PiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKVxuICB0aGlzLnVzZXIgPSAoKSA9PiAkYXV0aC5nZXRQYXlsb2FkKClcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbmZpZyhsb2FkaW5nQ29uZmlnKVxuXG5mdW5jdGlvbiBsb2FkaW5nQ29uZmlnKGNmcExvYWRpbmdCYXJQcm92aWRlcikge1xuICBjZnBMb2FkaW5nQmFyUHJvdmlkZXIuaW5jbHVkZVNwaW5uZXIgPSBmYWxzZVxuICBjZnBMb2FkaW5nQmFyUHJvdmlkZXIuaW5jbHVkZUJhciA9IHRydWVcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbmZpZyhMb2dpbkNvbmZpZylcblxuZnVuY3Rpb24gTG9naW5Db25maWcoJHN0YXRlUHJvdmlkZXIpIHtcbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgdXJsOiAnL2xvZ2luJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdtYWluJzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2xvZ2luLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ2xvZ2luJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAuc3RhdGUoJ2xvZ291dCcsIHtcbiAgICAgIHVybDogJy9sb2dvdXQnLFxuICAgICAgcmVkaXJlY3RUbzogJ2xvZ2luJyxcbiAgICB9KVxufVxuXG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpXG5cbmZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihBdXRoZW50aWNhdGlvbiwgJHN0YXRlKSB7XG4gIGxldCBlbWFpbFxuICBsZXQgcGFzc3dvcmRcblxuICB0aGlzLmNyZWRlbnRpYWxzID0ge1xuICAgIGVtYWlsLFxuICAgIHBhc3N3b3JkLFxuICB9XG5cbiAgdGhpcy5hdXRoZW50aWNhdGUgPSBhdXRoZW50aWNhdGVcblxuICBmdW5jdGlvbiBhdXRoZW50aWNhdGUoKSB7XG4gICAgQXV0aGVudGljYXRpb25cbiAgICAgIC5sb2dpbih0aGlzLmNyZWRlbnRpYWxzKVxuICAgICAgLnRoZW4ocmVkaXJlY3RUb0hvbWUpXG5cbiAgICBmdW5jdGlvbiByZWRpcmVjdFRvSG9tZSgpIHtcbiAgICAgICRzdGF0ZS5nbygnYXBwLmhvbWUnKVxuICAgIH1cbiAgfVxufVxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAucnVuKExvZ2luUnVuKVxuXG5mdW5jdGlvbiBMb2dpblJ1bigkcm9vdFNjb3BlLCAkc3RhdGUsIEF1dGhlbnRpY2F0aW9uKSB7XG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGxvZ291dEluTG9naW5TdGF0ZSlcbiAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgcmVxdWlyZUF1dGhlbnRpY2F0aW9uKVxuXG4gIGZ1bmN0aW9uIGxvZ291dEluTG9naW5TdGF0ZShldmVudCwgdG9TdGF0ZSkge1xuICAgIGlmICh0b1N0YXRlLm5hbWUgPT09ICdsb2dpbicpIHtcbiAgICAgIEF1dGhlbnRpY2F0aW9uLmxvZ291dCgpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVxdWlyZUF1dGhlbnRpY2F0aW9uKGV2ZW50LCB0b1N0YXRlKSB7XG4gICAgbGV0IHN0YXRlUmVxdWlyZUxvZ2luID0gdG9TdGF0ZS5uYW1lLnN0YXJ0c1dpdGgoJ2FwcC4nKVxuICAgIGxldCBpc0F1dGhlbnRpY2F0ZWQgPSBBdXRoZW50aWNhdGlvbi5zdGF0dXMoKVxuXG4gICAgaWYgKHN0YXRlUmVxdWlyZUxvZ2luICYmICFpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICRzdGF0ZS5nbygnbG9naW4nKVxuICAgIH1cbiAgfVxufVxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAuY29uZmlnKFByb21pc2VzQ29uZmlnKVxuXG5mdW5jdGlvbiBQcm9taXNlc0NvbmZpZygkcVByb3ZpZGVyKSB7XG4gICRxUHJvdmlkZXIuZXJyb3JPblVuaGFuZGxlZFJlamVjdGlvbnMoZmFsc2UpXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoVXNlcnNDb25maWcpXG5cbmZ1bmN0aW9uIFVzZXJzQ29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICRzdGF0ZVByb3ZpZGVyXG4gICAgLnN0YXRlKCdhcHAudXNlcnMnLCB7XG4gICAgICB1cmw6ICcvdXNlcnMnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ2NvbnRlbnRAYXBwJzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3VzZXJzLWxpc3QudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgICAgY29udHJvbGxlckFzOiAndXNlcnMnLFxuICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIGxpc3Q6IFVzZXJzID0+IFVzZXJzLmxpc3QoKSxcbiAgICAgICAgICAgIGRhdGE6ICgpID0+IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSlcbiAgICAuc3RhdGUoJ2FwcC51c2Vycy5jcmVhdGUnLCB7XG4gICAgICB1cmw6ICcvY3JlYXRlJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdjb250ZW50QGFwcCc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2Vycy1mb3JtLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3VzZXJzJyxcbiAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBsaXN0OiAoKSA9PiBudWxsLFxuICAgICAgICAgICAgZGF0YTogKFVzZXJzKSA9PiBVc2Vycy5jcmVhdGUoKVxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pXG4gICAgLnN0YXRlKCdhcHAudXNlcnMuZWRpdCcsIHtcbiAgICAgIHVybDogJy86aWQnLFxuICAgICAgdmlld3M6IHtcbiAgICAgICAgJ2NvbnRlbnRAYXBwJzoge1xuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3VzZXJzLWZvcm0udGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgICAgY29udHJvbGxlckFzOiAndXNlcnMnLFxuICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIGxpc3Q6ICgpID0+IG51bGwsXG4gICAgICAgICAgICBkYXRhOiAoVXNlcnMsICRzdGF0ZVBhcmFtcykgPT4gVXNlcnMuZ2V0KCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KVxufVxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgVXNlcnNDb250cm9sbGVyKVxuXG5mdW5jdGlvbiBVc2Vyc0NvbnRyb2xsZXIobGlzdCwgZGF0YSkge1xuICB0aGlzLmxpc3QgPSBsaXN0XG4gIHRoaXMuZGF0YSA9IGRhdGFcblxuICB0aGlzLm9wdGlvbnMgPSBbXG4gICAgJ1N0YXJrJyxcbiAgICAnTGFubmlzdGVyJyxcbiAgICAnVGFyZ2FyeWVuJyxcbiAgICAnU25vdycsXG4gIF1cbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLnNlcnZpY2UoJ1VzZXJzJywgVXNlcnNTZXJ2aWNlKVxuXG5mdW5jdGlvbiBVc2Vyc1NlcnZpY2UoUmVzdGFuZ3VsYXIpIHtcbiAgY29uc3QgcmVzb3VyY2UgPSBSZXN0YW5ndWxhci5zZXJ2aWNlKCd1c2VycycpXG5cbiAgdGhpcy5saXN0ID0gbGlzdFxuICB0aGlzLmdldCA9IGdldFxuICB0aGlzLmNyZWF0ZSA9IGNyZWF0ZVxuXG4gIGZ1bmN0aW9uIGxpc3QoKSB7XG4gICAgcmV0dXJuIHJlc291cmNlLmdldExpc3QoKVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0KGlkKSB7XG4gICAgcmV0dXJuIHJlc291cmNlLm9uZShpZCkuZ2V0KClcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4gcmVzb3VyY2Uub25lKClcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlcy9hbmd1bGFyIn0=
