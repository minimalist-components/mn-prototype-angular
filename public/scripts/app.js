"use strict";function NotFoundConfig($urlRouterProvider,$stateProvider){function goTo404($injector){var $state=$injector.get("$state"),message="Could not find a state associated with url "+window.location.pathname;$state.go("404",{message:message})}$urlRouterProvider.otherwise(goTo404),$stateProvider.state("404",{views:{main:{templateUrl:"templates/404.template.html"}}})}function NotFoundRun($rootScope,$state){function redirectTo404(){$state.go("404")}$rootScope.$on("$stateChangeError",redirectTo404)}function ApiConfig(RestangularProvider){RestangularProvider.setBaseUrl("http://localhost:4000"),RestangularProvider.setRestangularFields({id:"_id"})}function ApiRun(Restangular,$state){function redirectToParentState(data,operation){return"put"!==operation&&"post"!==operation||$state.go("^",{},{reload:!0}),data}Restangular.addResponseInterceptor(redirectToParentState)}function appConfig($locationProvider,$stateProvider){$locationProvider.html5Mode(!0),$stateProvider.state("app",{"abstract":!0,views:{main:{templateUrl:"templates/app.template.html"}}})}function AuthenticationConfig($authProvider){$authProvider.loginUrl="//localhost:4000/users/authenticate",$authProvider.authHeader="Authorization",$authProvider.tokenType="",$authProvider.authToken="",$authProvider.storageType="localStorage"}function Authentication($auth){this.login=function(user){return $auth.login(user)},this.logout=function(){return $auth.logout()},this.status=function(){return $auth.isAuthenticated()},this.user=function(){return $auth.getPayload()}}function HomeConfig($stateProvider){$stateProvider.state("app.home",{url:"/",redirectTo:"app.users"})}function loadingConfig(cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1,cfpLoadingBarProvider.includeBar=!0}function LoginConfig($stateProvider){$stateProvider.state("login",{url:"/login",views:{main:{templateUrl:"templates/login.template.html",controller:"LoginController",controllerAs:"login"}}}).state("logout",{url:"/logout",redirectTo:"login"})}function LoginController(Authentication,$state){function authenticate(){function redirectToHome(){$state.go("app.home")}Authentication.login(this.credentials).then(redirectToHome)}var email=void 0,password=void 0;this.credentials={email:email,password:password},this.authenticate=authenticate}function LoginRun($rootScope,$state,Authentication){function logoutInLoginState(event,toState){"login"===toState.name&&Authentication.logout()}function requireAuthentication(event,toState){var stateRequireLogin=toState.name.startsWith("app."),isAuthenticated=Authentication.status();stateRequireLogin&&!isAuthenticated&&(event.preventDefault(),$state.go("login"))}$rootScope.$on("$stateChangeStart",logoutInLoginState),$rootScope.$on("$stateChangeStart",requireAuthentication)}function PromisesConfig($qProvider){$qProvider.errorOnUnhandledRejections(!1)}function UsersConfig($stateProvider){$stateProvider.state("app.users",{url:"/users",views:{"content@app":{templateUrl:"templates/users-list.template.html",controller:"UsersController",controllerAs:"users",resolve:{list:function(Users){return Users.list()},data:function(){return null}}}}}).state("app.users.create",{url:"/create",views:{"content@app":{templateUrl:"templates/users-form.template.html",controller:"UsersController",controllerAs:"users",resolve:{list:function(){return null},data:function(Users){return Users.create()}}}}}).state("app.users.edit",{url:"/:id",views:{"content@app":{templateUrl:"templates/users-form.template.html",controller:"UsersController",controllerAs:"users",resolve:{list:function(){return null},data:function(Users,$stateParams){return Users.get($stateParams.id)}}}}})}function UsersController(list,data){this.list=list,this.data=data,this.options=["Stark","Lannister","Targaryen","Snow"]}function UsersService(Restangular){function list(){return resource.getList()}function get(id){return resource.one(id).get()}function create(){return resource.one()}var resource=Restangular.service("users");this.list=list,this.get=get,this.create=create}angular.module("prototype",["ui.router","ui.router.redirect","satellizer","mn-sidenav","restangular","angular-loading-bar","ngAnimate","mn-form","mn-input","mn-password","mn-select"]),NotFoundConfig.$inject=["$urlRouterProvider","$stateProvider"],angular.module("prototype").config(NotFoundConfig),NotFoundRun.$inject=["$rootScope","$state"],angular.module("prototype").run(NotFoundRun),ApiConfig.$inject=["RestangularProvider"],angular.module("prototype").config(ApiConfig),ApiRun.$inject=["Restangular","$state"],angular.module("prototype").run(ApiRun),appConfig.$inject=["$locationProvider","$stateProvider"],angular.module("prototype").config(appConfig),AuthenticationConfig.$inject=["$authProvider"],angular.module("prototype").config(AuthenticationConfig),Authentication.$inject=["$auth"],angular.module("prototype").service("Authentication",Authentication),HomeConfig.$inject=["$stateProvider"],angular.module("prototype").config(HomeConfig),loadingConfig.$inject=["cfpLoadingBarProvider"],angular.module("prototype").config(loadingConfig),LoginConfig.$inject=["$stateProvider"],angular.module("prototype").config(LoginConfig),LoginController.$inject=["Authentication","$state"],angular.module("prototype").controller("LoginController",LoginController),LoginRun.$inject=["$rootScope","$state","Authentication"],angular.module("prototype").run(LoginRun),PromisesConfig.$inject=["$qProvider"],angular.module("prototype").config(PromisesConfig),UsersConfig.$inject=["$stateProvider"],angular.module("prototype").config(UsersConfig),UsersController.$inject=["list","data"],angular.module("prototype").controller("UsersController",UsersController),UsersService.$inject=["Restangular"],angular.module("prototype").service("Users",UsersService);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIjQwNC80MDQuY29uZmlnLmpzIiwiNDA0LzQwNC5ydW4uanMiLCJhcGkvYXBpLmNvbmZpZy5qcyIsImFwaS9hcGkucnVuLmpzIiwiYXBwL2FwcC5jb25maWcuanMiLCJhdXRoZW50aWNhdGlvbi9hdXRoZW50aWNhdGlvbi5jb25maWcuanMiLCJhdXRoZW50aWNhdGlvbi9hdXRoZW50aWNhdGlvbi5zZXJ2aWNlLmpzIiwiaG9tZS9ob21lLmNvbmZpZy5qcyIsImxvYWRpbmctYmFyL2xvYWRpbmctYmFyLmNvbmZpZy5qcyIsImxvZ2luL2xvZ2luLmNvbmZpZy5qcyIsImxvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbi5ydW4uanMiLCJwcm9taXNlcy9wcm9taXNlcy5jb25maWcuanMiLCJ1c2Vycy91c2Vycy5jb25maWcuanMiLCJ1c2Vycy91c2Vycy5jb250cm9sbGVyLmpzIiwidXNlcnMvdXNlcnMuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJOb3RGb3VuZENvbmZpZyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwiZ29UbzQwNCIsIiRpbmplY3RvciIsIiRzdGF0ZSIsImdldCIsIm1lc3NhZ2UiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiZ28iLCJvdGhlcndpc2UiLCJzdGF0ZSIsInZpZXdzIiwibWFpbiIsInRlbXBsYXRlVXJsIiwiTm90Rm91bmRSdW4iLCIkcm9vdFNjb3BlIiwicmVkaXJlY3RUbzQwNCIsIiRvbiIsIkFwaUNvbmZpZyIsIlJlc3Rhbmd1bGFyUHJvdmlkZXIiLCJzZXRCYXNlVXJsIiwic2V0UmVzdGFuZ3VsYXJGaWVsZHMiLCJpZCIsIkFwaVJ1biIsIlJlc3Rhbmd1bGFyIiwicmVkaXJlY3RUb1BhcmVudFN0YXRlIiwiZGF0YSIsIm9wZXJhdGlvbiIsInJlbG9hZCIsImFkZFJlc3BvbnNlSW50ZXJjZXB0b3IiLCJhcHBDb25maWciLCIkbG9jYXRpb25Qcm92aWRlciIsImh0bWw1TW9kZSIsImFic3RyYWN0IiwiQXV0aGVudGljYXRpb25Db25maWciLCIkYXV0aFByb3ZpZGVyIiwibG9naW5VcmwiLCJhdXRoSGVhZGVyIiwidG9rZW5UeXBlIiwiYXV0aFRva2VuIiwic3RvcmFnZVR5cGUiLCJBdXRoZW50aWNhdGlvbiIsIiRhdXRoIiwidGhpcyIsImxvZ2luIiwidXNlciIsImxvZ291dCIsInN0YXR1cyIsImlzQXV0aGVudGljYXRlZCIsImdldFBheWxvYWQiLCJIb21lQ29uZmlnIiwidXJsIiwicmVkaXJlY3RUbyIsImxvYWRpbmdDb25maWciLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJpbmNsdWRlU3Bpbm5lciIsImluY2x1ZGVCYXIiLCJMb2dpbkNvbmZpZyIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJMb2dpbkNvbnRyb2xsZXIiLCJhdXRoZW50aWNhdGUiLCJyZWRpcmVjdFRvSG9tZSIsImNyZWRlbnRpYWxzIiwidGhlbiIsImVtYWlsIiwicGFzc3dvcmQiLCJMb2dpblJ1biIsImxvZ291dEluTG9naW5TdGF0ZSIsImV2ZW50IiwidG9TdGF0ZSIsIm5hbWUiLCJyZXF1aXJlQXV0aGVudGljYXRpb24iLCJzdGF0ZVJlcXVpcmVMb2dpbiIsInN0YXJ0c1dpdGgiLCJwcmV2ZW50RGVmYXVsdCIsIlByb21pc2VzQ29uZmlnIiwiJHFQcm92aWRlciIsImVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zIiwiVXNlcnNDb25maWciLCJjb250ZW50QGFwcCIsInJlc29sdmUiLCJsaXN0IiwiVXNlcnMiLCJjcmVhdGUiLCIkc3RhdGVQYXJhbXMiLCJVc2Vyc0NvbnRyb2xsZXIiLCJvcHRpb25zIiwiVXNlcnNTZXJ2aWNlIiwicmVzb3VyY2UiLCJnZXRMaXN0Iiwib25lIiwic2VydmljZSIsImFuZ3VsYXIiLCJtb2R1bGUiLCIkaW5qZWN0IiwiY29uZmlnIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0lBLFNBQVNBLGdCQUFlQyxtQkFBb0JDLGdCQWMxQyxR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STFFLFFDRFBPLFVBQVVpRSxTQUFXLG9CQUFxQixrQkFEMUNGLFFBQ0dDLE9BQU8sYUFDUEUsT0FBT2xFLFdDRFZJLHFCQUFxQjZELFNBQVcsaUJBRGhDRixRQUNHQyxPQUFPLGFBQ1BFLE9BQU85RCxzQkNEVk8sZUFBZXNELFNBQVcsU0FEMUJGLFFBQ0dDLE9BQU8sYUFDUEYsUUFBUSxpQkFBa0JuRCxnQkNEN0JTLFdBQVc2QyxTQUFXLGtCQUR0QkYsUUFDR0MsT0FBTyxhQUNQRSxPQUFPOUMsWUNEVkcsY0FBYzBDLFNBQVcseUJBRHpCRixRQUNHQyxPQUFPLGFBQ1BFLE9BQU8zQyxlQ0RWSSxZQUFZc0MsU0FBVyxrQkFEdkJGLFFBQ0dDLE9BQU8sYUFDUEUsT0FBT3ZDLGFDRFZHLGdCQUFnQm1DLFNBQVcsaUJBQWtCLFVBRDdDRixRQUNHQyxPQUFPLGFBQ1BwQyxXQUFXLGtCQUFtQkUsaUJDRGpDTyxTQUFTNEIsU0FBVyxhQUFjLFNBQVUsa0JBRDVDRixRQUNHQyxPQUFPLGFBQ1BHLElBQUk5QixVQ0RQUyxlQUFlbUIsU0FBVyxjQUQxQkYsUUFDR0MsT0FBTyxhQUNQRSxPQUFPcEIsZ0JDRFZHLFlBQVlnQixTQUFXLGtCQUR2QkYsUUFDR0MsT0FBTyxhQUNQRSxPQUFPakIsYUNEVk8sZ0JBQWdCUyxTQUFXLE9BQVEsUUFEbkNGLFFBQ0dDLE9BQU8sYUFDUHBDLFdBQVcsa0JBQW1CNEIsaUJDRGpDRSxhQUFhTyxTQUFXLGVBRHhCRixRQUNHQyxPQUFPLGFBQ1BGLFFBQVEsUUFBU0oiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3Byb3RvdHlwZScsIFtcbiAgJ3VpLnJvdXRlcicsXG4gICd1aS5yb3V0ZXIucmVkaXJlY3QnLFxuICAnc2F0ZWxsaXplcicsXG4gICdtbi1zaWRlbmF2JyxcbiAgJ3Jlc3Rhbmd1bGFyJyxcbiAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxuICAnbmdBbmltYXRlJyxcbiAgJ21uLWZvcm0nLFxuICAnbW4taW5wdXQnLFxuICAnbW4tcGFzc3dvcmQnLFxuICAnbW4tc2VsZWN0Jyxcbl0pXG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoTm90Rm91bmRDb25maWcpXG5cbmZ1bmN0aW9uIE5vdEZvdW5kQ29uZmlnKCR1cmxSb3V0ZXJQcm92aWRlciwgJHN0YXRlUHJvdmlkZXIpIHtcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShnb1RvNDA0KVxuXG4gICRzdGF0ZVByb3ZpZGVyXG4gICAgLnN0YXRlKCc0MDQnLCB7XG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbic6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy80MDQudGVtcGxhdGUuaHRtbCcsXG4gICAgICAgICAgLy8gY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcicsXG4gICAgICAgICAgLy8gY29udHJvbGxlckFzOiAndXNlcnMnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KVxuXG4gIGZ1bmN0aW9uIGdvVG80MDQoJGluamVjdG9yKSB7XG4gICAgY29uc3QgJHN0YXRlID0gJGluamVjdG9yLmdldCgnJHN0YXRlJylcbiAgICBjb25zdCBtZXNzYWdlID0gYENvdWxkIG5vdCBmaW5kIGEgc3RhdGUgYXNzb2NpYXRlZCB3aXRoIHVybCAke3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZX1gXG4gICAgJHN0YXRlLmdvKCc0MDQnLCB7bWVzc2FnZX0pXG4gIH1cbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLnJ1bihOb3RGb3VuZFJ1bilcblxuZnVuY3Rpb24gTm90Rm91bmRSdW4oJHJvb3RTY29wZSwgJHN0YXRlKSB7XG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIHJlZGlyZWN0VG80MDQpXG5cbiAgZnVuY3Rpb24gcmVkaXJlY3RUbzQwNCgpIHtcbiAgICAkc3RhdGUuZ28oJzQwNCcpXG4gIH1cbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbmZpZyhBcGlDb25maWcpXG5cbmZ1bmN0aW9uIEFwaUNvbmZpZyhSZXN0YW5ndWxhclByb3ZpZGVyKSB7XG4gIFJlc3Rhbmd1bGFyUHJvdmlkZXIuc2V0QmFzZVVybCgnaHR0cDovL2xvY2FsaG9zdDo0MDAwJylcbiAgUmVzdGFuZ3VsYXJQcm92aWRlci5zZXRSZXN0YW5ndWxhckZpZWxkcyh7aWQ6ICdfaWQnfSlcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLnJ1bihBcGlSdW4pXG5cbmZ1bmN0aW9uIEFwaVJ1bihSZXN0YW5ndWxhciwgJHN0YXRlKSB7XG4gIFJlc3Rhbmd1bGFyLmFkZFJlc3BvbnNlSW50ZXJjZXB0b3IocmVkaXJlY3RUb1BhcmVudFN0YXRlKVxuXG4gIGZ1bmN0aW9uIHJlZGlyZWN0VG9QYXJlbnRTdGF0ZShkYXRhLCBvcGVyYXRpb24pIHtcbiAgICBpZiAob3BlcmF0aW9uID09PSAncHV0JyB8fCBvcGVyYXRpb24gPT09ICdwb3N0Jykge1xuICAgICAgJHN0YXRlLmdvKCdeJywge30sIHtyZWxvYWQ6IHRydWV9KVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoYXBwQ29uZmlnKVxuXG5mdW5jdGlvbiBhcHBDb25maWcoJGxvY2F0aW9uUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyKSB7XG4gICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKVxuXG4gICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdhcHAnLCB7XG4gICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgdmlld3M6IHtcbiAgICAgIG1haW46IHtcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvYXBwLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxufVxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAuY29uZmlnKEF1dGhlbnRpY2F0aW9uQ29uZmlnKVxuXG5mdW5jdGlvbiBBdXRoZW50aWNhdGlvbkNvbmZpZygkYXV0aFByb3ZpZGVyKSB7XG4gICRhdXRoUHJvdmlkZXIubG9naW5VcmwgPSAnLy9sb2NhbGhvc3Q6NDAwMC91c2Vycy9hdXRoZW50aWNhdGUnXG4gICRhdXRoUHJvdmlkZXIuYXV0aEhlYWRlciA9ICdBdXRob3JpemF0aW9uJ1xuICAkYXV0aFByb3ZpZGVyLnRva2VuVHlwZSA9ICcnXG4gICRhdXRoUHJvdmlkZXIuYXV0aFRva2VuID0gJydcbiAgJGF1dGhQcm92aWRlci5zdG9yYWdlVHlwZSA9ICdsb2NhbFN0b3JhZ2UnXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5zZXJ2aWNlKCdBdXRoZW50aWNhdGlvbicsIEF1dGhlbnRpY2F0aW9uKVxuXG5mdW5jdGlvbiBBdXRoZW50aWNhdGlvbigkYXV0aCkge1xuICB0aGlzLmxvZ2luID0gdXNlciA9PiAkYXV0aC5sb2dpbih1c2VyKVxuICB0aGlzLmxvZ291dCA9ICgpID0+ICRhdXRoLmxvZ291dCgpXG4gIHRoaXMuc3RhdHVzID0gKCkgPT4gJGF1dGguaXNBdXRoZW50aWNhdGVkKClcbiAgdGhpcy51c2VyID0gKCkgPT4gJGF1dGguZ2V0UGF5bG9hZCgpXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoSG9tZUNvbmZpZylcblxuZnVuY3Rpb24gSG9tZUNvbmZpZygkc3RhdGVQcm92aWRlcikge1xuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnYXBwLmhvbWUnLCB7XG4gICAgICB1cmw6ICcvJyxcbiAgICAgIHJlZGlyZWN0VG86ICdhcHAudXNlcnMnLFxuICAgIH0pXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcobG9hZGluZ0NvbmZpZylcblxuZnVuY3Rpb24gbG9hZGluZ0NvbmZpZyhjZnBMb2FkaW5nQmFyUHJvdmlkZXIpIHtcbiAgY2ZwTG9hZGluZ0JhclByb3ZpZGVyLmluY2x1ZGVTcGlubmVyID0gZmFsc2VcbiAgY2ZwTG9hZGluZ0JhclByb3ZpZGVyLmluY2x1ZGVCYXIgPSB0cnVlXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5jb25maWcoTG9naW5Db25maWcpXG5cbmZ1bmN0aW9uIExvZ2luQ29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICRzdGF0ZVByb3ZpZGVyXG4gICAgLnN0YXRlKCdsb2dpbicsIHtcbiAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnbWFpbic6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9sb2dpbi50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICdsb2dpbicsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pXG4gICAgLnN0YXRlKCdsb2dvdXQnLCB7XG4gICAgICB1cmw6ICcvbG9nb3V0JyxcbiAgICAgIHJlZGlyZWN0VG86ICdsb2dpbicsXG4gICAgfSlcbn1cblxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKVxuXG5mdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIoQXV0aGVudGljYXRpb24sICRzdGF0ZSkge1xuICBsZXQgZW1haWxcbiAgbGV0IHBhc3N3b3JkXG5cbiAgdGhpcy5jcmVkZW50aWFscyA9IHtcbiAgICBlbWFpbCxcbiAgICBwYXNzd29yZCxcbiAgfVxuXG4gIHRoaXMuYXV0aGVudGljYXRlID0gYXV0aGVudGljYXRlXG5cbiAgZnVuY3Rpb24gYXV0aGVudGljYXRlKCkge1xuICAgIEF1dGhlbnRpY2F0aW9uXG4gICAgICAubG9naW4odGhpcy5jcmVkZW50aWFscylcbiAgICAgIC50aGVuKHJlZGlyZWN0VG9Ib21lKVxuXG4gICAgZnVuY3Rpb24gcmVkaXJlY3RUb0hvbWUoKSB7XG4gICAgICAkc3RhdGUuZ28oJ2FwcC5ob21lJylcbiAgICB9XG4gIH1cbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLnJ1bihMb2dpblJ1bilcblxuZnVuY3Rpb24gTG9naW5SdW4oJHJvb3RTY29wZSwgJHN0YXRlLCBBdXRoZW50aWNhdGlvbikge1xuICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBsb2dvdXRJbkxvZ2luU3RhdGUpXG4gICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIHJlcXVpcmVBdXRoZW50aWNhdGlvbilcblxuICBmdW5jdGlvbiBsb2dvdXRJbkxvZ2luU3RhdGUoZXZlbnQsIHRvU3RhdGUpIHtcbiAgICBpZiAodG9TdGF0ZS5uYW1lID09PSAnbG9naW4nKSB7XG4gICAgICBBdXRoZW50aWNhdGlvbi5sb2dvdXQoKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcXVpcmVBdXRoZW50aWNhdGlvbihldmVudCwgdG9TdGF0ZSkge1xuICAgIGxldCBzdGF0ZVJlcXVpcmVMb2dpbiA9IHRvU3RhdGUubmFtZS5zdGFydHNXaXRoKCdhcHAuJylcbiAgICBsZXQgaXNBdXRoZW50aWNhdGVkID0gQXV0aGVudGljYXRpb24uc3RhdHVzKClcblxuICAgIGlmIChzdGF0ZVJlcXVpcmVMb2dpbiAmJiAhaXNBdXRoZW50aWNhdGVkKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAkc3RhdGUuZ28oJ2xvZ2luJylcbiAgICB9XG4gIH1cbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbmZpZyhQcm9taXNlc0NvbmZpZylcblxuZnVuY3Rpb24gUHJvbWlzZXNDb25maWcoJHFQcm92aWRlcikge1xuICAkcVByb3ZpZGVyLmVycm9yT25VbmhhbmRsZWRSZWplY3Rpb25zKGZhbHNlKVxufVxuIiwiYW5ndWxhclxuICAubW9kdWxlKCdwcm90b3R5cGUnKVxuICAuY29uZmlnKFVzZXJzQ29uZmlnKVxuXG5mdW5jdGlvbiBVc2Vyc0NvbmZpZygkc3RhdGVQcm92aWRlcikge1xuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnYXBwLnVzZXJzJywge1xuICAgICAgdXJsOiAnL3VzZXJzJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdjb250ZW50QGFwcCc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2Vycy1saXN0LnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3VzZXJzJyxcbiAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBsaXN0OiBVc2VycyA9PiBVc2Vycy5saXN0KCksXG4gICAgICAgICAgICBkYXRhOiAoKSA9PiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pXG4gICAgLnN0YXRlKCdhcHAudXNlcnMuY3JlYXRlJywge1xuICAgICAgdXJsOiAnL2NyZWF0ZScsXG4gICAgICB2aWV3czoge1xuICAgICAgICAnY29udGVudEBhcHAnOiB7XG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdXNlcnMtZm9ybS50ZW1wbGF0ZS5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnVXNlcnNDb250cm9sbGVyJyxcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd1c2VycycsXG4gICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgbGlzdDogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgIGRhdGE6IChVc2VycykgPT4gVXNlcnMuY3JlYXRlKClcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KVxuICAgIC5zdGF0ZSgnYXBwLnVzZXJzLmVkaXQnLCB7XG4gICAgICB1cmw6ICcvOmlkJyxcbiAgICAgIHZpZXdzOiB7XG4gICAgICAgICdjb250ZW50QGFwcCc6IHtcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy91c2Vycy1mb3JtLnRlbXBsYXRlLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3VzZXJzJyxcbiAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICBsaXN0OiAoKSA9PiBudWxsLFxuICAgICAgICAgICAgZGF0YTogKFVzZXJzLCAkc3RhdGVQYXJhbXMpID0+IFVzZXJzLmdldCgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSlcbn1cbiIsImFuZ3VsYXJcbiAgLm1vZHVsZSgncHJvdG90eXBlJylcbiAgLmNvbnRyb2xsZXIoJ1VzZXJzQ29udHJvbGxlcicsIFVzZXJzQ29udHJvbGxlcilcblxuZnVuY3Rpb24gVXNlcnNDb250cm9sbGVyKGxpc3QsIGRhdGEpIHtcbiAgdGhpcy5saXN0ID0gbGlzdFxuICB0aGlzLmRhdGEgPSBkYXRhXG5cbiAgdGhpcy5vcHRpb25zID0gW1xuICAgICdTdGFyaycsXG4gICAgJ0xhbm5pc3RlcicsXG4gICAgJ1RhcmdhcnllbicsXG4gICAgJ1Nub3cnLFxuICBdXG59XG4iLCJhbmd1bGFyXG4gIC5tb2R1bGUoJ3Byb3RvdHlwZScpXG4gIC5zZXJ2aWNlKCdVc2VycycsIFVzZXJzU2VydmljZSlcblxuZnVuY3Rpb24gVXNlcnNTZXJ2aWNlKFJlc3Rhbmd1bGFyKSB7XG4gIGNvbnN0IHJlc291cmNlID0gUmVzdGFuZ3VsYXIuc2VydmljZSgndXNlcnMnKVxuXG4gIHRoaXMubGlzdCA9IGxpc3RcbiAgdGhpcy5nZXQgPSBnZXRcbiAgdGhpcy5jcmVhdGUgPSBjcmVhdGVcblxuICBmdW5jdGlvbiBsaXN0KCkge1xuICAgIHJldHVybiByZXNvdXJjZS5nZXRMaXN0KClcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldChpZCkge1xuICAgIHJldHVybiByZXNvdXJjZS5vbmUoaWQpLmdldCgpXG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIHJlc291cmNlLm9uZSgpXG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZXMvYW5ndWxhciJ9
